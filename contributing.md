# How to Contribute

The book is published using [Quarto](https://quarto.org/). 

## Adding New Content

* You can fork the repository before adding new content, and submit a pull request when you want to merge new content.
* Add new pages to `_quarto.yml`, per the [Quarto Book Structure](https://quarto.org/docs/books/book-structure.html). Otherwise they won't be rendered.
* If creating a new part, use `numbered: true` to [number chapters and sections](https://jupyterbook.org/en/stable/structure/configure.html#number-your-chapters-and-sections). The only parts that won't be numbered are the front-matter (license, acknowledgements, author bios, etc) and end-matter (references, etc).
* The GitHub repository is set up to automatically compile [the web version](https://viveks.me/CRA-book) using an Action upon a push to the `main` branch.
* Create a unique environment (`Project.toml`) for each notebook, so they are self-contained.
* With the exception of the introduction to Julia chapter, keep code in notebooks where possible and reference output figures/tables in the chapter narrative.

## Book Structure

### Parts

The book is composed of several parts, each of which correspond to a particular case study. Each part should be somewhat self-contained, as the goal of the book is to be modular based on the learning objectives of a particular class or tutorial. Links to other sections are ok when necessary. Each section should include [its own package environment][#environments] as needed.

### Narrative and Notebook Pages

* Pages can be narrative pages or notebook pages (also see [File Formatting](#file-formatting)). Narrative pages introduce sections, transition between topics within a section, or introduce concepts that do not have accompanying code. 
* Each page should be associated with certain learning objectives. In general, "active" learning objectives can be associated with notebooks, while "passive" learning objectives might make more sense for narrative pages. List these at the top of the page in a Markdown list (using [good learning objective constructions](https://www.aamc.org/system/files?file=2019-07/learning-objectives.pdf)). For pages which introduce parts, list the higher-level learning objectives for the overall part.
* Feel free to split "chapters" (within parts) into multiple pages. This is an advantage of a web-based book.
* Narrative pages can include demo code chunks. However, it's better if code is organized around Jupyter notebooks, and [figures can be embedded into narrative pages](https://quarto.org/docs/prerelease/1.3/embed.html). Ask what the purpose of the code is.
* Notebooks should use the `julia-1.8` kernel.

### Section Names

* Use standard Markdown section headers within each page (`#` for the page title, `##` for the main within-page sections, `###` for subsections, etc). These will get knitted together appropriately by JupyterBook within the broader book structure.
* Section names will automatically create anchors, which can be cross-referenced, e.g. `## Section` can be referenced later in a link using `[](#section). If you want to create your own label (which can often be less unwieldy), use
```{markdown}
(sec:your-label)=
## Section
```
and then cross-reference with `[](sec:your-label)`. The use of the `sec:` prefix makes it clear that this label is for a section header, and similar labels can then be used for figures, etc.
* Automatic anchor generation can create issues if the same names are used across pages. Try to avoid this within your part(s), and we will make sure these are unique across the entire book in the final editing pass.
* Err on the side of using more subsections rather than fewer; these will appear in a table of contents.

### References

Add references in BibTeX to `contents/bibliography/references.bib`. They will get auto-added on compile to the References section.

## Repository Organization

The book contents are stored within `contents/`.

### File Names

Make filenames informative about the topic (so they might mirror the overall page title).

### File Formatting

Narrative pages should be written in QMD files with a `.qmd` extension. Notebook pages should be written in Jupyter notebooks with a `.ipynb` extension.

Each section should have its own subfolder within `contents/`. For example, the uncertainty quantification section is in `contents/uq`. If necessary, place `data/` and `images/` subfolders within the main subfolders for each section. External data which is loaded within a chapter should be put in `data/` and cited appropriately within the relevant page(s). Provide external links as appropriate. 

Images which are imported (as opposed to being generated by executed code) should be included in `.png` format in `images/`. See [Images](#images) for more information on how to use images.
